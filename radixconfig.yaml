apiVersion: radix.equinor.com/v1
kind: RadixApplication
metadata:
  name: data-marketplace
spec:
  environments:
  - name: prod
    build:
      from: main
  components:
  - name: web
    publicPort: http
    ports:
    - name: http
      port: 3000
    environmentConfig:
    - environment: prod
      resources:
        requests:
          memory: 128Mi
          cpu: 50m
        limits:
          memory: 256Mi
          cpu: 100m
      variables:
        BASE_URL: https://web-data-marketplace-prod.radix.equinor.com/
    variables:
      NEXT_PUBLIC_COLLIBRA_BASE_URL: https://equinor-dev.collibra.com/rest/2.0
    secrets:
      - AUTH_CLIENT_ID
      - AUTH_CLIENT_SECRET
      - AUTH_TENANT_ID
      - NEXTAUTH_URL
      - NEXTAUTH_SECRET

  dnsAppAlias:
    environment: prod
    component: web

  dnsExternalAlias:
    - alias: datamarketplace.equinor.com
      environment: prod
      component: web
